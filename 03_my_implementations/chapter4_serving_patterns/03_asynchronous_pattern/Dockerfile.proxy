# =======================================================
# Proxy (FastAPI) Dockerfile
# =======================================================
FROM python:3.11-slim

WORKDIR /app

# 依存関係のインストール
COPY pyproject.toml ./
RUN pip install --no-cache-dir fastapi uvicorn redis pydantic requests

# ソースコードをコピー
COPY src/ ./src/
COPY run_proxy.sh ./

# ポート公開
EXPOSE 8000

# Proxy起動
CMD ["./run_proxy.sh"]
