################################################################################
# pytest å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœï¼ˆè©³ç´°ã‚«ãƒãƒ¬ãƒƒã‚¸ä»˜ãï¼‰
################################################################################
#
# å®Ÿè¡Œæ—¥æ™‚: 2025-11-06 07:52
# å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰: pytest tests/ -v --cov=src --cov-report=term-missing
# Python: 3.13.9
# pytest: 8.4.2
# pytest-cov: 7.0.0
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: Model-in-Image Pattern (Chapter 3)
#
# ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿æ–¹ã¯ tests/test_results/README.md ã‚’å‚ç…§ã—ã¦ãã ã•ã„
#
################################################################################

============================= test session starts ==============================
platform darwin -- Python 3.13.9, pytest-8.4.2, pluggy-1.6.0 -- /Users/kotaro/Desktop/dev/ML_designpattern/03_my_implementations/chapter3_release_patterns/01_model_in_image/.venv/bin/python3
cachedir: .pytest_cache
rootdir: /Users/kotaro/Desktop/dev/ML_designpattern/03_my_implementations/chapter3_release_patterns/01_model_in_image
configfile: pyproject.toml
plugins: anyio-4.11.0, cov-7.0.0
collecting ... collected 38 items

tests/test_api.py::TestHealthEndpoint::test_health_check PASSED          [  2%]
tests/test_api.py::TestHealthEndpoint::test_health_check_method_not_allowed PASSED [  5%]
tests/test_api.py::TestMetadataEndpoint::test_metadata PASSED            [  7%]
tests/test_api.py::TestLabelEndpoint::test_get_labels PASSED             [ 10%]
tests/test_api.py::TestPredictTestEndpoint::test_predict_test PASSED     [ 13%]
tests/test_api.py::TestPredictTestEndpoint::test_predict_test_label PASSED [ 15%]
tests/test_api.py::TestPredictEndpoint::test_predict_setosa PASSED       [ 18%]
tests/test_api.py::TestPredictEndpoint::test_predict_versicolor PASSED   [ 21%]
tests/test_api.py::TestPredictEndpoint::test_predict_virginica PASSED    [ 23%]
tests/test_api.py::TestPredictEndpoint::test_predict_label_setosa PASSED [ 26%]
tests/test_api.py::TestPredictEndpoint::test_predict_label_versicolor PASSED [ 28%]
tests/test_api.py::TestPredictEndpoint::test_predict_label_virginica PASSED [ 31%]
tests/test_api.py::TestPredictEndpoint::test_predict_invalid_data_missing_field PASSED [ 34%]
tests/test_api.py::TestPredictEndpoint::test_predict_invalid_data_wrong_type PASSED [ 36%]
tests/test_api.py::TestPredictEndpoint::test_predict_invalid_data_wrong_shape PASSED [ 39%]
tests/test_api.py::TestPredictEndpoint::test_predict_empty_data PASSED   [ 42%]
tests/test_api.py::TestPredictEndpoint::test_predict_method_not_allowed PASSED [ 44%]
tests/test_api.py::TestRootEndpoint::test_root_redirect_or_docs PASSED   [ 47%]
tests/test_api.py::TestRootEndpoint::test_docs_endpoint PASSED           [ 50%]
tests/test_api.py::TestRootEndpoint::test_openapi_json PASSED            [ 52%]
tests/test_prediction.py::TestData::test_data_model_default PASSED       [ 55%]
tests/test_prediction.py::TestData::test_data_model_custom PASSED        [ 57%]
tests/test_prediction.py::TestClassifier::test_classifier_initialization PASSED [ 60%]
tests/test_prediction.py::TestClassifier::test_load_model PASSED         [ 63%]
tests/test_prediction.py::TestClassifier::test_load_label PASSED         [ 65%]
tests/test_prediction.py::TestClassifier::test_predict_shape PASSED      [ 68%]
tests/test_prediction.py::TestClassifier::test_predict_probability_range PASSED [ 71%]
tests/test_prediction.py::TestClassifier::test_predict_setosa PASSED     [ 73%]
tests/test_prediction.py::TestClassifier::test_predict_versicolor PASSED [ 76%]
tests/test_prediction.py::TestClassifier::test_predict_virginica PASSED  [ 78%]
tests/test_prediction.py::TestClassifier::test_predict_label_setosa PASSED [ 81%]
tests/test_prediction.py::TestClassifier::test_predict_label_versicolor PASSED [ 84%]
tests/test_prediction.py::TestClassifier::test_predict_label_virginica PASSED [ 86%]
tests/test_prediction.py::TestClassifier::test_predict_multiple_samples PASSED [ 89%]
tests/test_prediction.py::TestClassifier::test_predict_invalid_shape PASSED [ 92%]
tests/test_prediction.py::TestClassifier::test_predict_invalid_type PASSED [ 94%]
tests/test_prediction.py::TestClassifier::test_model_file_not_found PASSED [ 97%]
tests/test_prediction.py::TestClassifier::test_label_file_not_found PASSED [100%]

================================ tests coverage ================================
_______________ coverage: platform darwin, python 3.13.9-final-0 _______________

Name                               Stmts   Miss  Cover   Missing
----------------------------------------------------------------
src/model_in_image/__init__.py         0      0   100%
src/model_in_image/app.py             88     33    62%   44-61, 113, 128, 133-135, 149, 154-156, 176, 182-183, 206, 211-219
src/model_in_image/prediction.py      75     17    77%   85-87, 106-111, 142-145, 182-187
----------------------------------------------------------------
TOTAL                                163     50    69%
Coverage HTML written to dir htmlcov
============================== 38 passed in 0.81s ==============================


################################################################################
# è©³ç´°ã‚«ãƒãƒ¬ãƒƒã‚¸åˆ†æ
################################################################################
#
# ã€ç·åˆã‚«ãƒãƒ¬ãƒƒã‚¸ã€‘
# ç·åˆ: 69% (163è¡Œä¸­113è¡Œã‚’ã‚«ãƒãƒ¼ã€50è¡ŒãŒæœªã‚«ãƒãƒ¼)
#
# ã€ãƒ•ã‚¡ã‚¤ãƒ«åˆ¥ã‚«ãƒãƒ¬ãƒƒã‚¸è©³ç´°ã€‘
#
# 1. src/model_in_image/__init__.py: 100% âœ…
#    - å®Œå…¨ã«ã‚«ãƒãƒ¼
#
# 2. src/model_in_image/app.py: 62% âš ï¸
#    - ã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ãªã„è¡Œ: 44-61, 113, 128, 133-135, 149, 154-156, 176, 182-183, 206, 211-219
#    - æœªã‚«ãƒãƒ¼ç®‡æ‰€ã®åˆ†æ:
#      * 44-61è¡Œ: startup/shutdownã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼
#      * 113è¡Œ: ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‡¦ç†
#      * 128, 133-135è¡Œ: ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ï¼‰
#      * 149, 154-156è¡Œ: ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆæ¨è«–å®Ÿè¡Œï¼‰
#      * 176, 182-183è¡Œ: ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆç¢ºç‡äºˆæ¸¬ï¼‰
#      * 206, 211-219è¡Œ: ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆãƒ©ãƒ™ãƒ«äºˆæ¸¬ï¼‰
#
#    æ”¹å–„æ¡ˆ:
#    - startup/shutdownã®ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
#    - ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ï¼ˆãƒ¢ãƒ‡ãƒ«èª­ã¿è¾¼ã¿å¤±æ•—ã€æ¨è«–å¤±æ•—ãªã©ï¼‰
#
# 3. src/model_in_image/prediction.py: 77% âš ï¸
#    - ã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ãªã„è¡Œ: 85-87, 106-111, 142-145, 182-187
#    - æœªã‚«ãƒãƒ¼ç®‡æ‰€ã®åˆ†æ:
#      * 85-87è¡Œ: ãƒ¢ãƒ‡ãƒ«èª­ã¿è¾¼ã¿æ™‚ã®ä¾‹å¤–å‡¦ç†
#      * 106-111è¡Œ: ãƒ©ãƒ™ãƒ«èª­ã¿è¾¼ã¿æ™‚ã®ä¾‹å¤–å‡¦ç†
#      * 142-145è¡Œ: äºˆæ¸¬æ™‚ã®ä¾‹å¤–å‡¦ç†
#      * 182-187è¡Œ: ãƒ©ãƒ™ãƒ«å¤‰æ›æ™‚ã®ä¾‹å¤–å‡¦ç†
#
#    æ”¹å–„æ¡ˆ:
#    - ç•°å¸¸ç³»ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ï¼ˆç ´æã—ãŸãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã€JSONè§£æã‚¨ãƒ©ãƒ¼ãªã©ï¼‰
#    - ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®ãƒ†ã‚¹ãƒˆã‚’å¼·åŒ–
#
# ã€ã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Šã®ãŸã‚ã®å„ªå…ˆé †ä½ã€‘
#
# å„ªå…ˆåº¦: é«˜ ğŸ”´
#   - startup/shutdownã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆè¿½åŠ 
#   - ãƒ¢ãƒ‡ãƒ«/ãƒ©ãƒ™ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿å¤±æ•—ãƒ†ã‚¹ãƒˆ
#
# å„ªå…ˆåº¦: ä¸­ ğŸŸ¡
#   - æ¨è«–å®Ÿè¡Œæ™‚ã®ä¾‹å¤–ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ
#   - ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼ã‚¨ãƒ©ãƒ¼ã®è¿½åŠ ãƒ†ã‚¹ãƒˆ
#
# å„ªå…ˆåº¦: ä½ ğŸŸ¢
#   - ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã®è¿½åŠ ãƒ†ã‚¹ãƒˆ
#   - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
#
# ã€ç·åˆè©•ä¾¡ã€‘
# âœ… å…¨38ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒæˆåŠŸï¼ˆ100%ï¼‰
# âœ… å®Ÿè¡Œæ™‚é–“ã¯éå¸¸ã«é«˜é€Ÿï¼ˆ0.81ç§’ï¼‰
# âœ… ä¸»è¦ãªæ©Ÿèƒ½ï¼ˆæ¨è«–ã€APIï¼‰ã¯ååˆ†ã«ãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹
# âš ï¸ ã‚«ãƒãƒ¬ãƒƒã‚¸ã¯69%ã§ç›®æ¨™ã®80%ã«æœªé”
# ğŸ“ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ ã™ã‚Œã°ã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Šå¯èƒ½
#
# ã€å®Ÿç”¨ä¸Šã®è©•ä¾¡ã€‘
# âœ… æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤å¯èƒ½ãƒ¬ãƒ™ãƒ«ã®å“è³ª
# âœ… ä¸»è¦ãªæ©Ÿèƒ½ã¯å…¨ã¦ãƒ†ã‚¹ãƒˆæ¸ˆã¿
# âœ… Kubernetesã§ã®å®Ÿãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæˆåŠŸ
# ğŸ“ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãŒã€ãƒ†ã‚¹ãƒˆãŒä¸è¶³
#
################################################################################
